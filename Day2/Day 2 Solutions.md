# Day 2 Solutions

## [A - Snowflake Snow Snowflakes](https://vjudge.net/problem/POJ-3349)

> ### 题意
>
> 你有n片雪花，每片雪花其实就是六个数（围成一个圈，让你判断这n片雪花中有没有相同的两片雪花。雪花相同的定义就是这两片雪花经过旋转，顺时针数或逆时针数这两片雪花对应的数都是相同的。

### 题解

这题是一道哈希的模板题。只需要求出每个雪花经过旋转，顺时针逆时针的所有排列（总共12种）的哈希值，然后找有没有相同的就可以了。判断相同的方法有很多种，哈希表、排序判重、map等都可以。

## [B - Palindrome](https://vjudge.net/problem/POJ-3974)

> ### 题意
>
> 求出每个字符串的最长回文字串的长度。

### 题解

枚举一个点，然后求出如果把这个点作为回文串的最中间的点能最多得到多长的回文串。求这个值可以用到二分，因为如果当前长度可行，那么比此长度短的长度一定可行，具有单调性。判断字串是不是回文串可以用到部分和和哈希。只需要正着倒着分别算一遍哈希然后用部分和可以求出每一段正着倒着的哈希值，如果这两个值相同，那么这就是个回文串，否则不是。

当然也可以使用更高效的Manacher算法。

## [D - Fibonacci](https://vjudge.net/problem/POJ-3070)

> ### 题意
>
> 求斐波那契数列第n项的后四位。其中
> $$
> F_0=0,F_1=1,Fn=F_{n-1}+F_{n-2} (n\ge2)
> $$
> 

### 题解

这题是一道矩阵乘法的模板题。由斐波那契数列公式可以推出：
$$
\left[
\begin{matrix}
F_{n-1}&F_n
\end{matrix}
\right]
=
\left[
\begin{matrix}
F_{n-2}&F_{n-1}
\end{matrix}
\right]
*
\left[
\begin{matrix}
0&1\\
1&1
\end{matrix}
\right]
$$
然后可以用快速幂算出结果。

## [E - Matrix Power Series](https://vjudge.net/problem/POJ-3233)

> ### 题意
>
> 给你一个n*n的矩阵A，一个正整数k，让你求出总和
> $$
> S=A+A_2+A_3+...+A_k
> $$
> 

### 题解

这题很明显是矩阵乘法。分别用矩阵快速幂求出每一项A^i,然后把每一项矩阵相加即可,由于k很大，必须采用二分求解。

当k为偶数时：

比如 k=6,那么     
$$
A+A_2+A_3+A_4+A_5+A_6=A+A_2+A_3+A_3*(A+A_2+A_3)
$$
可以得出（其中E为单位矩阵，即矩阵的1）：
$$
S_k=S_{k/2}+A_{n/2} * S_{k/2}\\
S_k=(E+A_{n/2})*S_{n/2}
$$
当k为奇数时，
$$
S_k=S_{k-1}+A_k
$$
最后二分求解出的答案即为所求。

## [F - Blocks](https://vjudge.net/problem/POJ-3734)

> ### 题意
>
> 假设一行有N个块，每个块可以涂成红色，蓝色，绿色或黄色，红色块和绿色块的数量都是偶数。求绘制这些块的不同方法的数量。

### 题解

假设从左边开始染色。设染到第i个时，红绿都是偶数的方案数为$$a_i$$，红绿恰有一个是偶数的方案数为$$b_i$$，红绿都为奇数的方案数为$$c_i$$，那么染到第i+1个方块时，红绿都为偶数的方案只有两种可能：

1. 染到第i 个后，红绿的数量都为偶数，第i+1 个方块染成黄色或者蓝色；
2. 染到第i 个后，红绿数量恰有一个偶数，第i+1 个方块染成红绿中数量是奇数的那种颜色。

因此得到递推公式：
$$
a_{i+1}=2*a_i+b_i
$$
同样的递推，能得到：
$$
b_{i+1}=2*a_i+2*b_i+2*c_i\\
c_{i+1}=b_i+2*c_i
$$
使用矩阵来表示此递推式可得：
$$
\left[
\begin{matrix}
a_{i+1}&b_{i+1}&c_{i+1}
\end{matrix}
\right]
=
\left[
\begin{matrix}
a_i&b_i&c_i
\end{matrix}
\right]
*
\left[
\begin{matrix}
2&2&0\\
1&2&1\\
0&2&2
\end{matrix}
\right]
$$
